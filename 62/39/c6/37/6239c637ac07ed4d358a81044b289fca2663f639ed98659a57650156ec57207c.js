!function(){var e=window.pdf2htmlEX=window.pdf2htmlEX||{},t="pf",i="pc",n="pi",s="bi",a="ir",o={container_id:"page-container",sidebar_id:"sidebar",outline_id:"outline",loading_indicator_cls:"loading-indicator",preload_pages:3,render_timeout:100,scale_step:.9,key_handler:!0,hashchange_handler:!0,view_history_handler:!0,__dummy__:"no comma"};function r(e,t){return[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]]}function c(e){return parseInt(e.getAttribute("data-page-no"),16)}function l(e){for(var t=0,i=e.length;t<i;++t)e[t].addEventListener("dragstart",(function(){return!1}),!1)}function h(e){for(var t={},i=0,n=arguments.length;i<n;++i){var s,a=arguments[i];for(s in a)a.hasOwnProperty(s)&&(t[s]=a[s])}return t}function d(e){if(e){this.shown=this.loaded=!1,this.page=e,this.num=c(e),this.original_height=e.clientHeight,this.original_width=e.clientWidth;var t=e.getElementsByClassName(i)[0];t&&(this.content_box=t,this.original_scale=this.cur_scale=this.original_height/t.clientHeight,this.page_data=JSON.parse(e.getElementsByClassName(n)[0].getAttribute("data-data")),this.ctm=this.page_data.ctm,this.ictm=function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]}(this.ctm),this.loaded=!0)}}function g(e){this.config=h(o,0<arguments.length?e:{}),this.pages_loading=[],this.init_before_loading_content();var t=this;document.addEventListener("DOMContentLoaded",(function(){t.init_after_loading_content()}),!1)}d.prototype={hide:function(){this.loaded&&this.shown&&(this.content_box.classList.remove("opened"),this.shown=!1)},show:function(){this.loaded&&!this.shown&&(this.content_box.classList.add("opened"),this.shown=!0)},rescale:function(e){this.cur_scale=0===e?this.original_scale:e,this.loaded&&((e=this.content_box.style).msTransform=e.webkitTransform=e.transform="scale("+this.cur_scale.toFixed(3)+")"),(e=this.page.style).height=this.original_height*this.cur_scale+"px",e.width=this.original_width*this.cur_scale+"px"},view_position:function(){var e=this.page,t=e.parentNode;return[t.scrollLeft-e.offsetLeft-e.clientLeft,t.scrollTop-e.offsetTop-e.clientTop]},height:function(){return this.page.clientHeight},width:function(){return this.page.clientWidth}},g.prototype={scale:1,cur_page_idx:0,first_page_idx:0,init_before_loading_content:function(){this.pre_hide_pages()},initialize_radio_button:function(){for(var e=document.getElementsByClassName(a),t=0;t<e.length;t++)e[t].addEventListener("click",(function(){this.classList.toggle("checked")}))},init_after_loading_content:function(){this.sidebar=document.getElementById(this.config.sidebar_id),this.outline=document.getElementById(this.config.outline_id),this.container=document.getElementById(this.config.container_id),this.loading_indicator=document.getElementsByClassName(this.config.loading_indicator_cls)[0];for(var e=!0,t=this.outline.childNodes,i=0,n=t.length;i<n;++i)if("ul"===t[i].nodeName.toLowerCase()){e=!1;break}if(e||this.sidebar.classList.add("opened"),this.find_pages(),0!=this.pages.length){l(document.getElementsByClassName(s)),this.config.key_handler&&this.register_key_handler();var a=this;this.config.hashchange_handler&&window.addEventListener("hashchange",(function(e){a.navigate_to_dest(document.location.hash.substring(1))}),!1),this.config.view_history_handler&&window.addEventListener("popstate",(function(e){e.state&&a.navigate_to_dest(e.state)}),!1),this.container.addEventListener("scroll",(function(){a.update_page_idx(),a.schedule_render(!0)}),!1),[this.container,this.outline].forEach((function(e){e.addEventListener("click",a.link_handler.bind(a),!1)})),this.initialize_radio_button(),this.render()}},find_pages:function(){for(var e=[],i={},n=this.container.childNodes,s=0,a=n.length;s<a;++s){var o=n[s];o.nodeType===Node.ELEMENT_NODE&&o.classList.contains(t)&&(o=new d(o),e.push(o),i[o.num]=e.length-1)}this.pages=e,this.page_map=i},load_page:function(e,i,n){var a=this.pages;if(!(e>=a.length||(a=a[e],a.loaded||this.pages_loading[e]))){var o=(a=a.page).getAttribute("data-page-url");if(o){this.pages_loading[e]=!0;var r=a.getElementsByClassName(this.config.loading_indicator_cls)[0];void 0===r&&((r=this.loading_indicator.cloneNode(!0)).classList.add("active"),a.appendChild(r));var c=this,h=new XMLHttpRequest;h.open("GET",o,!0),h.onload=function(){if(200===h.status||0===h.status){(i=document.createElement("div")).innerHTML=h.responseText;for(var i,a=null,o=0,r=(i=i.childNodes).length;o<r;++o){var g=i[o];if(g.nodeType===Node.ELEMENT_NODE&&g.classList.contains(t)){a=g;break}}i=c.pages[e],c.container.replaceChild(a,i.page),i=new d(a),c.pages[e]=i,i.hide(),i.rescale(c.scale),l(a.getElementsByClassName(s)),c.schedule_render(!1),n&&n(i)}delete c.pages_loading[e]},h.send(null)}void 0===i&&(i=this.config.preload_pages),0<--i&&(c=this,setTimeout((function(){c.load_page(e+1,i)}),0))}},pre_hide_pages:function(){var e="@media screen{."+i+"{display:none;}}",t=document.createElement("style");t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},render:function(){for(var e,t=(i=(t=this.container).scrollTop)-(e=t.clientHeight),i=i+e+e,n=0,s=(e=this.pages).length;n<s;++n){var a=e[n],o=(r=a.page).offsetTop+r.clientTop,r=o+r.clientHeight;o<=i&&r>=t?a.loaded?a.show():this.load_page(n):a.hide()}},update_page_idx:function(){var e=this.pages,t=e.length;if(!(2>t)){for(var i=(n=this.container).scrollTop,n=i+n.clientHeight,s=-1,a=t,o=a-s;1<o;){(o=e[r=s+Math.floor(o/2)].page).offsetTop+o.clientTop+o.clientHeight>=i?a=r:s=r,o=a-s}this.first_page_idx=a;for(var r=s=this.cur_page_idx,c=0;a<t;++a){var l=(o=e[a].page).offsetTop+o.clientTop;o=o.clientHeight;if(l>n)break;if(o=(Math.min(n,l+o)-Math.max(i,l))/o,a===s&&Math.abs(o-1)<=1e-6){r=s;break}o>c&&(c=o,r=a)}this.cur_page_idx=r}},schedule_render:function(e){if(void 0!==this.render_timer){if(!e)return;clearTimeout(this.render_timer)}var t=this;this.render_timer=setTimeout((function(){delete t.render_timer,t.render()}),this.config.render_timeout)},register_key_handler:function(){var e=this;window.addEventListener("DOMMouseScroll",(function(t){if(t.ctrlKey){t.preventDefault();var i=(n=e.container).getBoundingClientRect(),n=[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop];e.rescale(Math.pow(e.config.scale_step,t.detail),!0,n)}}),!1),window.addEventListener("keydown",(function(t){var i=!1,n=t.ctrlKey||t.metaKey,s=t.altKey;switch(t.keyCode){case 61:case 107:case 187:n&&(e.rescale(1/e.config.scale_step,!0),i=!0);break;case 173:case 109:case 189:n&&(e.rescale(e.config.scale_step,!0),i=!0);break;case 48:n&&(e.rescale(0,!1),i=!0);break;case 33:s?e.scroll_to(e.cur_page_idx-1):e.container.scrollTop-=e.container.clientHeight,i=!0;break;case 34:s?e.scroll_to(e.cur_page_idx+1):e.container.scrollTop+=e.container.clientHeight,i=!0;break;case 35:e.container.scrollTop=e.container.scrollHeight,i=!0;break;case 36:e.container.scrollTop=0,i=!0}i&&t.preventDefault()}),!1)},rescale:function(e,t,i){var n=this.scale;this.scale=e=0===e?1:t?n*e:e,i||(i=[0,0]),t=this.container,i[0]+=t.scrollLeft,i[1]+=t.scrollTop;for(var s=this.pages,a=s.length,o=this.first_page_idx;o<a;++o){if((r=s[o].page).offsetTop+r.clientTop>=i[1])break}0>(r=o-1)&&(r=0);var r,c=(r=s[r].page).clientWidth,l=(o=r.clientHeight,r.offsetLeft+r.clientLeft),h=i[0]-l;for(0>h?h=0:h>c&&(h=c),c=r.offsetTop+r.clientTop,0>(i=i[1]-c)?i=0:i>o&&(i=o),o=0;o<a;++o)s[o].rescale(e);t.scrollLeft+=h/n*e+r.offsetLeft+r.clientLeft-h-l,t.scrollTop+=i/n*e+r.offsetTop+r.clientTop-i-c,this.schedule_render(!0)},fit_width:function(){var e=this.cur_page_idx;this.rescale(this.container.clientWidth/this.pages[e].width(),!0),this.scroll_to(e)},fit_height:function(){var e=this.cur_page_idx;this.rescale(this.container.clientHeight/this.pages[e].height(),!0),this.scroll_to(e)},get_containing_page:function(e){for(;e;){if(e.nodeType===Node.ELEMENT_NODE&&e.classList.contains(t)){e=c(e);var i=this.page_map;return e in i?this.pages[i[e]]:null}e=e.parentNode}return null},link_handler:function(e){var t=e.target,i=t.getAttribute("data-dest-detail");if(i){if(this.config.view_history_handler)try{var n=this.get_current_view_hash();window.history.replaceState(n,"","#"+n),window.history.pushState(i,"","#"+i)}catch(e){}this.navigate_to_dest(i,this.get_containing_page(t)),e.preventDefault()}},navigate_to_dest:function(e,t){try{var i=JSON.parse(e)}catch(e){return}if(i instanceof Array&&(s=i[0])in(a=this.page_map)){for(var n=a[s],s=this.pages[n],a=2,o=i.length;a<o;++a){if(null!==(h=i[a])&&"number"!=typeof h)return}for(;6>i.length;)i.push(null);a=(o=t||this.pages[this.cur_page_idx]).view_position(),a=r(o.ictm,[a[0],o.height()-a[1]]),o=this.scale;var c=[0,0],l=!0,h=!1,d=this.scale;switch(i[1]){case"XYZ":c=[null===i[2]?a[0]:i[2]*d,null===i[3]?a[1]:i[3]*d],null!==(o=i[4])&&0!==o||(o=this.scale),h=!0;break;case"Fit":case"FitB":c=[0,0],h=!0;break;case"FitH":case"FitBH":c=[0,null===i[2]?a[1]:i[2]*d],h=!0;break;case"FitV":case"FitBV":c=[null===i[2]?a[0]:i[2]*d,0],h=!0;break;case"FitR":c=[i[2]*d,i[5]*d],l=!1,h=!0}if(h){this.rescale(o,!1);var g=this;i=function(e){c=r(e.ctm,c),l&&(c[1]=e.height()-c[1]),g.scroll_to(n,c)};s.loaded?i(s):(this.load_page(n,void 0,i),this.scroll_to(n))}}},scroll_to:function(e,t){var i=this.pages;if(!(0>e||e>=i.length)){i=i[e].view_position(),void 0===t&&(t=[0,0]);var n=this.container;n.scrollLeft+=t[0]-i[0],n.scrollTop+=t[1]-i[1]}},get_current_view_hash:function(){var e=[],t=this.pages[this.cur_page_idx];e.push(t.num),e.push("XYZ");var i=t.view_position();i=r(t.ictm,[i[0],t.height()-i[1]]);return e.push(i[0]/this.scale),e.push(i[1]/this.scale),e.push(this.scale),JSON.stringify(e)}},e.Viewer=g}();